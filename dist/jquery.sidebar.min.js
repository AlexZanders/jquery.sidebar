/*! jQuery SideBar - v1.0.2 - 2012-08-15
* https://github.com/sideroad/jquery.sidebar
* Copyright (c) 2012 sideroad; Licensed MIT, GPL */
(function(a,b){a.fn.sidebar=function(c){return this.each(function(){var d=a(this),e=d.data("sidebar")||{},f,g,h,i=e.duration,j,k,l,m,n,o,p,q,r,s,t,u=a("<div><div/>"),v=a("<div><div/>"),w=a("<div><div/>"),x,y,z=function(){var a=d.data("sidebar")||{},b=a.callback.sidebar.open,c=a.container,e=a.inject,f=a.body;if(a.isEnter||a.isProcessing)return;a.isEnter=!0,a.isProcessing=!0,c.animate(a.animate.container.enter,{duration:i,complete:function(){e.fadeOut(i,function(){f.show("clip",i,function(){a.isProcessing=!1,b&&b()})})}})},A=function(){var a=d.data("sidebar")||{},b=a.callback.sidebar.close,c=a.container,e=a.inject,f=a.body;if(!a.isEnter||a.isProcessing)return;a.isProcessing=!0,c.animate(a.animate.container.leave,{duration:i,complete:function(){f.hide("clip",i,function(){e.fadeIn(i,function(){a.isEnter=!1,a.isProcessing=!1,b&&b()})})}})};if(typeof c=="string"){switch(c){case"open":z();break;case"close":A()}return}c=a.extend(!0,{root:a(document.body),position:"left",callback:{item:{enter:function(){a(this).animate({marginLeft:"5px"},250)},leave:function(){a(this).animate({marginLeft:"0px"},250)}},sidebar:{open:function(){},close:function(){}}},animate:{container:{enter:{},leave:{}}},duration:200,open:"mouseenter.sidebar",close:"mouseleave.sidebar"},c),x=c.root,t=!x.is(document.body),y=t?x.addClass("sidebar-root"):a(b),o=c.position,i=c.duration,u.attr("id","jquerySideBar"+(new Date).getTime()).addClass("sidebar-container").addClass(o),v.addClass("sidebar-inject").addClass(o),w.addClass("sidebar-body"),w.append(this),u.append(w),u.append(v),x.append(u),g=u.width(),h=u.height(),j=v.width(),k=v.height(),m={height:h,width:g},n={height:h,width:g},o==="left"||o==="right"?(f=g-j,l={height:h,width:j},m.top=c.top||y.height()/2-h/2+"px"):(f=h-k,l={height:k,width:g},m.left=c.left||y.width()/2-g/2+"px"),m[o]="-"+f+"px",l[o]=f+"px",c.animate.container.enter[o]=0,c.animate.container.leave[o]="-"+f,u.css(m),v.css(l),w.css(n).hide(),a(this).addClass("sidebar-menu").find("li").bind("mouseenter.sidebar",c.callback.item.enter).bind("mouseleave.sidebar",c.callback.item.leave),c.open&&u.bind(c.open,z),c.close&&u.bind(c.close,A),c.container=u,c.inject=v,c.body=w,d.data("sidebar",c),y.resize(function(){o==="left"||o==="right"?u.css({top:a(this).height()/2-h/2+"px"}):u.css({left:a(this).width()/2-g/2+"px"})})})}})(jQuery,this);